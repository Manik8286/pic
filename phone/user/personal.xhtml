<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:c="http://java.sun.com/jsp/jstl/core"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:jsf="http://xmlns.jcp.org/jsf"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             id="personalFieldSet">

    <div class="group">
      <div class="label">
        <span class="label">#{_['Gender:']} *</span>
      </div>
      <div class="entry">
        <span class="form-dropdown #{viewType == 'touch' ? '-touch' : ''}" data-dropdown="gender" style="#{viewType == 'touch' ? 'width: 100%' : ''}" data-calc-width="#{viewType == 'touch' ? 'false' : 'true'}">
        <h:inputText id="gender"
          styleClass="js-field #{ component.valid ? '' : '-invalid'}"
          value="#{address.gender}"
          required="true"
          requiredMessage="#{_['Required.']}"
          style="display: none" />
        <button type="button" class="label"><span>(#{_['Please choose']})</span></button>
          <ul class="choices">
          <ui:repeat value="#{commonDataBean.genders}" var="p">
            <li data-value="#{p.value}">#{p.label}</li>
          </ui:repeat>
          </ul>
        </span>
        <h:message for="gender" styleClass="validation -error -bottom" />
      </div>
    </div>


   <ui:fragment rendered="#{showTitle}">
      <div class="group">
        <div class="label">
          <span class="label">#{_['Title:']}</span>
        </div>
        <div class="entry">
        <h:inputText id="title"
          styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
          converter="StringFieldConverter"
          value="#{address.title}" />
          <h:message for="title" styleClass="validation -error -bottom" />
        </div>
      </div>
    </ui:fragment>

    <ui:fragment rendered="#{forenameRequired}">
      <div class="group">
        <div class="label">
          <span class="label">#{_['Forename']}: *</span>
        </div>
        <div class="entry">
        <h:inputText id="forename"
          styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
          converter="StringFieldConverter"
          required="true"
          requiredMessage="#{_['Required.']}"
          value="#{address.forename}" />
          <h:message for="forename" styleClass="validation -error -bottom" />
        </div>
      </div>
    </ui:fragment>

    <ui:fragment>
      <div class="group">
        <div class="label">
          <span class="label">#{_['Surname:']} *</span>
        </div>
        <div class="entry">
        <h:inputText id="surname"
          styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
          converter="StringFieldConverter"
          required="true"
          requiredMessage="#{_['Required.']}"
          value="#{address.surname}" />
          <h:message for="surname" styleClass="validation -error -bottom" />
        </div>
      </div>
    </ui:fragment>

    <ui:fragment rendered="#{showEmail}">
      <div class="group">
        <div class="label">
          <span class="label">#{_['E-Mail:']} *</span>
        </div>
        <div class="entry">
        <h:inputText id="email"
          styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
          converter="StringFieldConverter"
          required="true"
          requiredMessage="#{_['Required.']}"
          value="#{address.email}" />
          <h:message for="email" styleClass="validation -error -bottom" />
        </div>
      </div>
    </ui:fragment>


    <ui:remove><!-- Password section --></ui:remove>
    <c:if test="#{(!empty showChangePassword) and showChangePassword}">

      <div class="group">
        <div class="label">
          <span class="label">#{_['Change Password:']}</span>

          <div class="checkbox -inline -huge">
            <h:selectBooleanCheckbox id="changePassword"
                converter="BooleanFieldConverter"
                process="@this"
                update=":userEditor:changePasswordFragment"
                value="#{changePasswordValue}">

              <p:ajax update=":userEditor:changePasswordFragment" process="@this" />
            </h:selectBooleanCheckbox>
            <h:outputLabel for="changePassword"></h:outputLabel>
          </div>
        </div>
      </div>

      <div jsf:id="changePasswordFragment">
        <ui:fragment rendered="#{changePasswordValue}">
          <div class="group">
            <div class="label">
              <span class="label">#{_['Current Password:']} *</span>
            </div>
            <div class="entry">
            <h:inputSecret id="currentPassword"
              styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
              converter="StringFieldConverter"
              required="true"
              requiredMessage="#{_['Required.']}"
              value="#{currentPassword}" />

              <h:message for="currentPassword" styleClass="validation -error -bottom" />
            </div>
          </div>

          <div class="group">
            <div class="label">
              <span class="label">#{_['New Password:']} *</span>
            </div>
            <div class="entry">
            <h:inputSecret id="password"
              styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
              converter="StringFieldConverter"
              required="true"
              requiredMessage="#{_['Required.']}"
              value="#{password}" />

              <h:message for="password" styleClass="validation -error -bottom" />
            </div>
          </div>

          <div class="group">
            <div class="label">
              <span class="label">#{_['New Password:']} *</span>
            </div>
            <div class="entry">
            <h:inputSecret id="repeatedPassword"
              styleClass="input -fullbleed -shy #{viewType == 'touch' ? '-touch' : ''} #{ component.valid ? '' : '-invalid'}"
              converter="StringFieldConverter"
              required="true"
              requiredMessage="#{_['Required.']}"
              value="#{repeatedPassword}" />

              <h:message for="repeatedPassword" styleClass="validation -error -bottom" />
            </div>
          </div>

        </ui:fragment>
      </div>

    </c:if>


</ui:fragment>
