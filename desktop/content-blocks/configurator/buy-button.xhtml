<ui:composition xmlns="http://www.w3.org/1999/xhtml"
								xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">

  <h:messages styleClass="outmsg" globalOnly="true"
    errorClass="-error"
    warnClass="-warn"
    infoClass="-info" />

  <p><p:commandLink action="#{itemConfiguratorBean.addToCart}"
                            value="#{_['Add To Shopping Cart']}"
									 global="false"
                            onstart="return previewConfig.validateParams()"
                            rendered="#{itemConfiguratorBean.itemType != 'cart-item'}"
                            styleClass="js-next-button action button -action -arrow" />

  
  <!-- the persist-method does not redirect to the shoppingcart, so we have
      to explicit route it there with javascript.
      This is legit, since many JSF commands are executed with javascript.
  -->
  
  <p:commandLink action="#{itemConfiguratorBean.persist}"
                 value="#{_['Save Changes']}"
					  global="false"
                 onstart="return previewConfig.validateParams()"
                 rendered="#{itemConfiguratorBean.itemType == 'cart-item'}"
                 styleClass="js-next-button action button -action -arrow"
                 oncomplete="window.location='shoppingcart.jsf'"/></p>
  <h:messages styleClass="outmsg" globalOnly="true"/>

</ui:composition>